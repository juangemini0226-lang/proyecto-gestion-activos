{% extends "admin/base_site.html" %}
{% load i18n static admin_menu %}

{% block extrahead %}
{{ block.super }}
<script src="{% static 'core/admin.js' %}"></script>
{% endblock %}

{% block content %}
<div class="dashboard">
  {% if app_list %}
  <div class="app-grid">
    {% for app in app_list %}
    {% with app|organise_admin_app as organised %}
    <section class="app-card">
      <header class="app-header" role="button" aria-expanded="true">
        <span class="app-name">{{ organised.name }}</span>
        <span class="app-meta">
          {% blocktrans count counter=organised.sections|length %}
            {{ counter }} bloque
          {% plural %}
            {{ counter }} bloques
          {% endblocktrans %}
        </span>
      </header>
      <div class="app-content">
        {% for section in organised.sections %}
        <div class="model-section">
          {% if section.show_title %}
          <h3 class="section-title">{{ section.title }}</h3>
          {% endif %}
          <ul class="model-list">
            {% for model in section.models %}
            <li>
              {% if model.admin_url %}
                <a href="{{ model.admin_url }}">{{ model.name }}</a>
              {% else %}
                {{ model.name }}
              {% endif %}
              {% if model.add_url %}
                <a href="{{ model.add_url }}" class="addlink" aria-label="{% blocktrans with name=model.name %}Add {{ name }}{% endblocktrans %}">
                  <span aria-hidden="true">+</span>
                </a>
              {% endif %}
            </li>
            {% endfor %}
          </ul>
        </div>
        {% endfor %}
      </div>
    </section>
    {% endwith %}
    {% endfor %}
  </div>
  {% else %}
  <p>{% trans "You don't have permission to view or edit anything." %}</p>
  {% endif %}
</div>
{% endblock %}